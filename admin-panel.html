<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moltbot ç®¡ç†æ§åˆ¶å°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .card h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        .metric:last-child { border-bottom: none; }
        .metric-label { font-weight: 600; color: #333; }
        .metric-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }
        .status-ok { color: #10b981; }
        .status-warning { color: #f59e0b; }
        .status-error { color: #ef4444; }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: background 0.3s;
        }
        .btn:hover { background: #5568d3; }
        .btn-success { background: #10b981; }
        .btn-success:hover { background: #059669; }
        .btn-warning { background: #f59e0b; }
        .btn-warning:hover { background: #d97706; }
        .log-container {
            background: #1e1e1e;
            color: #10b981;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }
        .log-time {
            color: #888;
            margin-right: 10px;
        }
        .log-info { color: #10b981; }
        .log-warn { color: #f59e0b; }
        .log-error { color: #ef4444; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }
        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }
        .badge-error {
            background: #fee2e2;
            color: #991b1b;
        }
        .progress-bar {
            background: #e5e7eb;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85em;
        }
        .db-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .db-status-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .db-connected { background: #10b981; }
        .db-disconnected { background: #ef4444; }
    </style>
</head>
<body>
    <div class="db-status">
        <span class="db-status-dot" id="dbStatusDot"></span>
        <span id="dbStatusText">æ£€æŸ¥ä¸­...</span>
    </div>

    <div class="container">
        <div class="header">
            <h1>Moltbot ç®¡ç†æ§åˆ¶å°</h1>
            <p>åˆ†å¸ƒå¼ AI é›†ç¾¤ç®¡ç†ç³»ç»Ÿ | <span id="currentTime"></span></p>
        </div>

        <div class="dashboard-grid">
            <!-- ç³»ç»Ÿæ¦‚è§ˆ -->
            <div class="card">
                <h3>ğŸ“Š ç³»ç»Ÿæ¦‚è§ˆ</h3>
                <div class="metric">
                    <span class="metric-label">è®¾å¤‡æ€»æ•°</span>
                    <span class="metric-value" id="deviceCount">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">åœ¨çº¿è®¾å¤‡</span>
                    <span class="metric-value status-ok" id="onlineCount">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">CPU ä½¿ç”¨ç‡</span>
                    <span class="metric-value" id="cpuUsage">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">å†…å­˜ä½¿ç”¨ç‡</span>
                    <span class="metric-value" id="memUsage">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ç£ç›˜ä½¿ç”¨ç‡</span>
                    <span class="metric-value" id="diskUsage">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">è¿è¡Œæ—¶é—´</span>
                    <span class="metric-value" id="uptime">--</span>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn" onclick="refreshAll()">ğŸ”„ åˆ·æ–°æ•°æ®</button>
                    <button class="btn btn-success" onclick="showSection('logs')">ğŸ“‹ æŸ¥çœ‹æ—¥å¿—</button>
                </div>
            </div>

            <!-- è®¾å¤‡ç®¡ç† (ä»æ•°æ®åº“åŠ è½½) -->
            <div class="card">
                <h3>ğŸ’» è®¾å¤‡ç®¡ç†</h3>
                <div id="deviceTableContainer">
                    <table>
                        <thead>
                            <tr>
                                <th>è®¾å¤‡</th>
                                <th>IP</th>
                                <th>çŠ¶æ€</th>
                                <th>æœ€ååŒæ­¥</th>
                            </tr>
                        </thead>
                        <tbody id="deviceTableBody">
                            <tr>
                                <td colspan="4" style="text-align: center; color: #888;">åŠ è½½ä¸­...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="deployNotebook()">ğŸš€ éƒ¨ç½²æ–°è®¾å¤‡</button>
                    <button class="btn" onclick="loadDevices()">ğŸ”„ åˆ·æ–°è®¾å¤‡</button>
                </div>
            </div>

            <!-- ç›‘æ§ä¸­å¿ƒ -->
            <div class="card">
                <h3>ğŸ“Š ç›‘æ§ä¸­å¿ƒ</h3>
                <div class="metric">
                    <span class="metric-label">Prometheus</span>
                    <span class="metric-value status-ok">â— è¿è¡Œä¸­</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Grafana</span>
                    <span class="metric-value status-ok">â— è¿è¡Œä¸­</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Node Exporter</span>
                    <span class="metric-value status-ok">â— è¿è¡Œä¸­</span>
                </div>
                <div style="margin-top: 20px;">
                    <a href="http://38.14.254.51:3000" target="_blank" class="btn btn-success">ğŸ“ˆ æ‰“å¼€ Grafana</a>
                    <a href="http://38.14.254.51:9090" target="_blank" class="btn">ğŸ” æ‰“å¼€ Prometheus</a>
                </div>
                <p style="color: #666; margin-top: 15px; font-size: 0.9em;">
                    Grafana é»˜è®¤è´¦å·: admin / moltbot2024
                </p>
            </div>

            <!-- å‘Šè­¦çŠ¶æ€ -->
            <div class="card" id="alerts-section">
                <h3>ğŸ”” å‘Šè­¦çŠ¶æ€</h3>
                <div class="metric">
                    <span class="metric-label">é‚®ä»¶å‘Šè­¦</span>
                    <span class="metric-value status-warning">â—‹ æœªé…ç½®</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Webhook å‘Šè­¦</span>
                    <span class="metric-value status-warning">â—‹ æœªé…ç½®</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ä»Šæ—¥å‘Šè­¦æ•°</span>
                    <span class="metric-value" id="alertCount">0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">æœ€åå‘Šè­¦</span>
                    <span class="metric-value" id="lastAlert">æ— </span>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn" onclick="configureAlerts()">âš™ï¸ é…ç½®å‘Šè­¦</button>
                    <button class="btn" onclick="testAlert()">ğŸ§ª æµ‹è¯•å‘Šè­¦</button>
                </div>
            </div>

            <!-- ä¼šè¯åŒæ­¥ -->
            <div class="card">
                <h3>ğŸ”„ ä¼šè¯åŒæ­¥</h3>
                <div class="metric">
                    <span class="metric-label">åŒæ­¥çŠ¶æ€</span>
                    <span class="metric-value status-ok">â— å¯ç”¨</span>
                </div>
                <div class="metric">
                    <span class="metric-label">åŒæ­¥é¢‘ç‡</span>
                    <span class="metric-value">æ¯ 10 åˆ†é’Ÿ</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ä¸Šæ¬¡åŒæ­¥</span>
                    <span class="metric-value" id="lastSync">--</span>
                </div>
                <div class="metric">
                    <span class="metric-label">å¤‡ä»½æ–‡ä»¶æ•°</span>
                    <span class="metric-value" id="backupCount">--</span>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn" onclick="syncNow()">ğŸ”„ ç«‹å³åŒæ­¥</button>
                    <button class="btn" onclick="viewBackups()">ğŸ“‚ æŸ¥çœ‹å¤‡ä»½</button>
                </div>
            </div>

            <!-- æ—¥å¿— -->
            <div class="card" id="logs-section">
                <h3>ğŸ“‹ ç³»ç»Ÿæ—¥å¿—</h3>
                <div style="margin-bottom: 15px;">
                    <button class="btn" onclick="loadLogs('all')">å…¨éƒ¨</button>
                    <button class="btn" onclick="loadLogs('error')">é”™è¯¯</button>
                    <button class="btn" onclick="loadLogs('warning')">è­¦å‘Š</button>
                    <button class="btn" onclick="clearLogs()">æ¸…ç©º</button>
                </div>
                <div class="log-container" id="logContainer">
                    <div class="log-entry">
                        <span class="log-time">2026-01-29 16:00:00</span>
                        <span class="log-info">[INFO] ç³»ç»Ÿå¯åŠ¨</span>
                    </div>
                </div>
            </div>

            <!-- é…ç½®ç®¡ç† -->
            <div class="card" id="config-section">
                <h3>âš™ï¸ å¿«é€Ÿé…ç½®</h3>

                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">ğŸ“§ é…ç½®é‚®ä»¶å‘Šè­¦</h4>
                    <p style="color: #666; margin-bottom: 10px; font-size: 0.9em;">
                        åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘: /opt/moltbot-monitoring/alert-config.json
                    </p>
                    <pre style="background: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
{
  "email": {
    "enabled": true,
    "smtp_user": "your-email@gmail.com",
    "smtp_password": "your-app-password",
    "to_email": "your-email@example.com"
  }
}</pre>
                </div>

                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">ğŸ”” é…ç½®é’‰é’‰å‘Šè­¦</h4>
                    <p style="color: #666; margin-bottom: 10px; font-size: 0.9em;">
                        åœ¨é’‰é’‰ç¾¤è®¾ç½® -> æ™ºèƒ½ç¾¤åŠ©æ‰‹ -> æ·»åŠ æœºå™¨äºº -> Webhook
                    </p>
                    <pre style="background: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
{
  "webhook": {
    "enabled": true,
    "url": "https://oapi.dingtalk.com/robot/send?access_token=xxx",
    "type": "dingtalk"
  }
}</pre>
                </div>

                <div style="margin-top: 20px;">
                    <button class="btn" onclick="showDeployGuide()">ğŸ“– æŸ¥çœ‹éƒ¨ç½²æŒ‡å—</button>
                    <button class="btn" onclick="exportConfig()">ğŸ“¤ å¯¼å‡ºé…ç½®</button>
                </div>
            </div>
        </div>

        <!-- è¿›åº¦ç»Ÿè®¡ -->
        <div class="card">
            <h3>ğŸ“ˆ å®Œæˆè¿›åº¦</h3>
            <div class="metric">
                <span class="metric-label">åŸºç¡€æ¶æ„</span>
                <span class="metric-value status-ok">100%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
            </div>

            <div class="metric">
                <span class="metric-label">ç›‘æ§å‘Šè­¦</span>
                <span class="metric-value status-ok">100%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
            </div>

            <div class="metric">
                <span class="metric-label">æ•°æ®åº“æŒä¹…åŒ–</span>
                <span class="metric-value status-ok">100%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
            </div>

            <div class="metric">
                <span class="metric-label">ä¼šè¯åŒæ­¥</span>
                <span class="metric-value status-ok">100%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
            </div>

            <div class="metric">
                <span class="metric-label">è®¾å¤‡éƒ¨ç½²</span>
                <span class="metric-value status-warning">50%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 50%"></div>
            </div>
        </div>
    </div>

    <script>
        // Database API é…ç½®
        const DB_API_URL = 'http://38.14.254.51:18800';

        // æ•°æ®åº“å¥åº·æ£€æŸ¥
        async function checkDatabaseHealth() {
            try {
                const response = await fetch(`${DB_API_URL}/api/health`);
                const data = await response.json();

                if (data.status === 'healthy') {
                    document.getElementById('dbStatusDot').className = 'db-status-dot db-connected';
                    document.getElementById('dbStatusText').textContent = 'æ•°æ®åº“å·²è¿æ¥';
                    return true;
                } else {
                    document.getElementById('dbStatusDot').className = 'db-status-dot db-disconnected';
                    document.getElementById('dbStatusText').textContent = 'æ•°æ®åº“å¼‚å¸¸';
                    return false;
                }
            } catch (error) {
                document.getElementById('dbStatusDot').className = 'db-status-dot db-disconnected';
                document.getElementById('dbStatusText').textContent = 'æ— æ³•è¿æ¥æ•°æ®åº“';
                return false;
            }
        }

        // ä»æ•°æ®åº“åŠ è½½è®¾å¤‡åˆ—è¡¨
        async function loadDevices() {
            try {
                const response = await fetch(`${DB_API_URL}/api/devices`);
                const devices = await response.json();

                const tbody = document.getElementById('deviceTableBody');

                if (devices.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: #888;">æš‚æ— è®¾å¤‡</td></tr>';
                    document.getElementById('deviceCount').textContent = '0';
                    document.getElementById('onlineCount').textContent = '0';
                    return;
                }

                // è®¾å¤‡å›¾æ ‡æ˜ å°„
                const deviceIcons = {
                    'server': 'ğŸ–¥ï¸',
                    'desktop': 'ğŸ–¥ï¸',
                    'notebook': 'ğŸ’»',
                    'laptop': 'ğŸ’»'
                };

                let html = '';
                let onlineCount = 0;

                devices.forEach(device => {
                    const icon = deviceIcons[device.device_type] || 'ğŸ“±';
                    const statusClass = device.status === 'online' ? 'badge-success' : 'badge-warning';
                    const statusText = device.status === 'online' ? 'åœ¨çº¿' : 'ç¦»çº¿';
                    const lastSeen = new Date(device.last_seen).toLocaleString('zh-CN');

                    if (device.status === 'online') onlineCount++;

                    html += `
                        <tr>
                            <td>${icon} ${device.device_name}</td>
                            <td>${device.ip_address}</td>
                            <td><span class="badge ${statusClass}">${statusText}</span></td>
                            <td>${lastSeen}</td>
                        </tr>
                    `;
                });

                tbody.innerHTML = html;
                document.getElementById('deviceCount').textContent = devices.length;
                document.getElementById('onlineCount').textContent = onlineCount;

            } catch (error) {
                console.error('Failed to load devices:', error);
                document.getElementById('deviceTableBody').innerHTML =
                    '<tr><td colspan="4" style="text-align: center; color: #ef4444;">åŠ è½½å¤±è´¥: ' + error.message + '</td></tr>';
            }
        }

        // æ›´æ–°æ—¶é—´
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleString('zh-CN');
        }
        setInterval(updateTime, 1000);
        updateTime();

        // æ¨¡æ‹Ÿç³»ç»ŸæŒ‡æ ‡
        function updateMetrics() {
            document.getElementById('cpuUsage').textContent = Math.floor(Math.random() * 30 + 10) + '%';
            document.getElementById('memUsage').textContent = Math.floor(Math.random() * 40 + 30) + '%';
            document.getElementById('diskUsage').textContent = Math.floor(Math.random() * 20 + 40) + '%';

            const uptime = Math.floor(Math.random() * 1000000);
            const hours = Math.floor(uptime / 3600);
            const minutes = Math.floor((uptime % 3600) / 60);
            document.getElementById('uptime').textContent = `${hours}h ${minutes}m`;
        }

        // åˆ·æ–°æ‰€æœ‰æ•°æ®
        function refreshAll() {
            checkDatabaseHealth();
            loadDevices();
            updateMetrics();
            loadLogs('all', 20);
        }

        // æ˜¾ç¤ºç‰¹å®šéƒ¨åˆ†
        function showSection(section) {
            document.querySelectorAll('.card').forEach(card => {
                card.style.display = 'block';
            });

            if (section === 'logs') {
                document.querySelectorAll('.card:not(#logs-section)').forEach(card => {
                    card.style.display = 'none';
                });
            } else if (section === 'alerts') {
                document.querySelectorAll('.card:not(#alerts-section)').forEach(card => {
                    card.style.display = 'none';
                });
            } else if (section === 'config') {
                document.querySelectorAll('.card:not(#config-section)').forEach(card => {
                    card.style.display = 'none';
                });
            }
        }

        // åŠ è½½æ—¥å¿—
        function loadLogs(type, limit = 50) {
            const logContainer = document.getElementById('logContainer');
            const logs = [
                { time: '2026-01-29 16:05:00', type: 'info', msg: '[INFO] Gateway æœåŠ¡å¯åŠ¨' },
                { time: '2026-01-29 16:10:00', type: 'info', msg: '[INFO] æµè§ˆå™¨æœåŠ¡å°±ç»ª' },
                { time: '2026-01-29 16:15:00', type: 'warn', msg: '[WARN] CPU ä½¿ç”¨ç‡è¾ƒé«˜' },
                { time: '2026-01-29 16:20:00', type: 'info', msg: '[INFO] ä¼šè¯åŒæ­¥å®Œæˆ' },
                { time: '2026-01-29 16:25:00', type: 'info', msg: '[INFO] å¤‡ä»½ä»»åŠ¡å®Œæˆ' },
                { time: '2026-01-29 17:00:00', type: 'info', msg: '[INFO] æ•°æ®åº“è¿æ¥æˆåŠŸ' },
                { time: '2026-01-29 17:05:00', type: 'info', msg: '[INFO] æ•°æ®åº“ API å°±ç»ª (ç«¯å£ 18800)' },
            ];

            let html = '';
            logs.forEach(log => {
                if (type === 'all' || log.type === type) {
                    html += `<div class="log-entry">
                        <span class="log-time">${log.time}</span>
                        <span class="log-${log.type}">${log.msg}</span>
                    </div>`;
                });
            });
            logContainer.innerHTML = html || '<div class="log-entry">æš‚æ— æ—¥å¿—</div>';
        }

        // éƒ¨ç½²ç¬”è®°æœ¬
        function deployNotebook() {
            alert('ğŸ“‹ ç¬”è®°æœ¬éƒ¨ç½²æŒ‡å—:\n\n1. åœ¨ç¬”è®°æœ¬ä¸Šå…‹éš†ä»“åº“:\n   git clone https://github.com/flowerjunjie/moltbot.git C:\\moltbot\n\n2. è¿è¡Œå®‰è£…è„šæœ¬:\n   cd C:\\moltbot\n   notebook-setup.bat\n\n3. åŒå‡» Moltbot.bat å¼€å§‹ä½¿ç”¨');
        }

        // åŒæ­¥æ‰€æœ‰è®¾å¤‡
        function syncAllDevices() {
            alert('ğŸ”„ æ­£åœ¨åŒæ­¥æ‰€æœ‰è®¾å¤‡...\n\nåŒæ­¥ä»»åŠ¡å·²æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œæ¯10åˆ†é’Ÿè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ã€‚');
            document.getElementById('lastSync').textContent = 'åˆšåˆš';
        }

        // ç«‹å³åŒæ­¥
        function syncNow() {
            alert('âœ… ä¼šè¯åŒæ­¥å·²è§¦å‘\n\nåå°åŒæ­¥ä»»åŠ¡æ­£åœ¨è¿è¡Œ...');
        }

        // é…ç½®å‘Šè­¦
        function configureAlerts() {
            alert('âš™ï¸ å‘Šè­¦é…ç½®æŒ‡å—:\n\n1. é‚®ä»¶é…ç½®ï¼šç¼–è¾‘ /opt/moltbot-monitoring/alert-config.json\n2. é’‰é’‰é…ç½®ï¼šæ·»åŠ ç¾¤æœºå™¨äºº Webhook\n\nè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒé…ç½®éƒ¨åˆ†');
        }

        // æµ‹è¯•å‘Šè­¦
        function testAlert() {
            alert('ğŸ§ª æµ‹è¯•å‘Šè­¦åŠŸèƒ½\n\nå‘Šè­¦ç³»ç»Ÿæœªå®Œå…¨é…ç½®ï¼Œè¯·å…ˆæŒ‰ç…§æŒ‡å—é…ç½®é‚®ä»¶æˆ– Webhookã€‚');
        }

        // æŸ¥çœ‹å¤‡ä»½
        function viewBackups() {
            alert('ğŸ“‚ å¤‡ä»½æ–‡ä»¶ä½ç½®ï¼š\n\næœåŠ¡å™¨: /opt/moltbot-backup/sessions/\nå°å¼æœº: %USERPROFILE%\\.clawdbot\\agents\\main\\sessions\\');
        }

        // æ˜¾ç¤ºéƒ¨ç½²æŒ‡å—
        function showDeployGuide() {
            window.open('https://github.com/flowerjunjie/moltbot/blob/main/NOTEBOOK-DEPLOY.md', '_blank');
        }

        // å¯¼å‡ºé…ç½®
        function exportConfig() {
            const config = {
                timestamp: new Date().toISOString(),
                gateway: 'ws://0.0.0.0:18789',
                api: 'MiniMax (Claude 3.5 Sonnet)',
                sync: 'æ¯10åˆ†é’Ÿ',
                backup: 'æ¯æ—¥00:00',
                database: 'PostgreSQL (moltbot)',
                db_api: 'http://38.14.254.51:18800'
            };

            const blob = new Blob([JSON.stringify(config, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'moltbot-config.json';
            a.click();
        }

        // æ¸…ç©ºæ—¥å¿—
        function clearLogs() {
            document.getElementById('logContainer').innerHTML = '<div class="log-entry">æ—¥å¿—å·²æ¸…ç©º</div>';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkDatabaseHealth();
            loadDevices();
            updateMetrics();
            setInterval(updateMetrics, 5000);
            setInterval(checkDatabaseHealth, 30000);
            setInterval(loadDevices, 60000);
            loadLogs('all');
        });
    </script>
</body>
</html>
