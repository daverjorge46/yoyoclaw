---
summary: "OpenClaw å…¨åŠŸèƒ½æ²™ç›’ç¯å¢ƒ - é›†æˆæµè§ˆå™¨å’Œç¼–ç¨‹å·¥å…·çš„å®Œæ•´å¼€å‘ç¯å¢ƒ"
read_when:
  - ä½ éœ€è¦ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ²™ç›’ç¯å¢ƒç”¨äº Agent å·¥å…·æ‰§è¡Œ
  - ä½ éœ€è¦åœ¨æ²™ç›’ä¸­ä½¿ç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·
  - ä½ éœ€è¦åœ¨æ²™ç›’ä¸­è¿è¡Œå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆJavaScript/TypeScript, Go, Rust, Pythonï¼‰
  - ä½ å¸Œæœ›è·å¾—æ¯”åŸºç¡€æ²™ç›’æ›´å¼ºå¤§çš„å·¥å…·é›†
title: "å…¨åŠŸèƒ½æ²™ç›’ç¯å¢ƒ (Ultimate Sandbox)"
---

# å…¨åŠŸèƒ½æ²™ç›’ç¯å¢ƒ (Ultimate Sandbox)

OpenClaw Ultimate Sandbox æ˜¯ä¸€ä¸ªé›†æˆ**æµè§ˆå™¨**å’Œ**ç¼–ç¨‹å·¥å…·**çš„å®Œæ•´æ²™ç›’ç¯å¢ƒï¼Œä¸“ä¸ºéœ€è¦ä¸°å¯Œå·¥å…·é›†çš„ Agent è®¾è®¡ã€‚

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†å®‰è£…æ­¥éª¤](#è¯¦ç»†å®‰è£…æ­¥éª¤)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æµè§ˆå™¨ä½¿ç”¨](#æµè§ˆå™¨ä½¿ç”¨)
- [ç¼–ç¨‹å·¥å…·æ¸…å•](#ç¼–ç¨‹å·¥å…·æ¸…å•)
- [é«˜çº§é…ç½®](#é«˜çº§é…ç½®)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æµè§ˆå™¨ç»„ä»¶

- **Chromium æµè§ˆå™¨**: å®Œæ•´çš„æµè§ˆå™¨å¼•æ“
- **Chrome DevTools Protocol (CDP)**: ç«¯å£ 9222ï¼Œç”¨äºæµè§ˆå™¨è‡ªåŠ¨åŒ–
- **Xvfb (X Virtual Frame Buffer)**: æ— å¤´æ˜¾ç¤ºæœåŠ¡å™¨
- **VNC + noVNC**: è¿œç¨‹æ¡Œé¢è®¿é—®ï¼ˆç«¯å£ 5900 å’Œ 6080ï¼‰

### ç¼–ç¨‹å·¥å…·

| ç±»åˆ« | å·¥å…· | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **JavaScript/TypeScript** | Node.js + npm | ç³»ç»Ÿé»˜è®¤ | åç«¯è¿è¡Œæ—¶ |
| | pnpm | æœ€æ–° | å¿«é€ŸåŒ…ç®¡ç†å™¨ |
| | Bun | æœ€æ–° | é«˜æ€§èƒ½ JS è¿è¡Œæ—¶ |
| **ç³»ç»Ÿç¼–ç¨‹** | Go (Golang) | ç³»ç»Ÿé»˜è®¤ | é™æ€ç±»å‹ç¼–è¯‘è¯­è¨€ |
| | Rust + Cargo | ç³»ç»Ÿé»˜è®¤ | å†…å­˜å®‰å…¨ç³»ç»Ÿè¯­è¨€ |
| **Python** | Python 3 | ç³»ç»Ÿé»˜è®¤ | è„šæœ¬å’Œæ•°æ®å¤„ç† |
| | pip + venv | æœ€æ–° | Python åŒ…ç®¡ç†å’Œè™šæ‹Ÿç¯å¢ƒ |
| **å¤šåª’ä½“** | FFmpeg | ç³»ç»Ÿé»˜è®¤ | éŸ³è§†é¢‘å¤„ç† |
| **åŸºç¡€å·¥å…·** | git, curl, wget, jq, ripgrep | - | å¼€å‘å¿…å¤‡å·¥å…· |
| | build-essential | - | C/C++ ç¼–è¯‘å·¥å…·é“¾ |

### å®‰å…¨ç‰¹æ€§

- âœ… åŸºäº Debian Bookworm Slimï¼ˆè½»é‡çº§åŸºç¡€é•œåƒï¼‰
- âœ… é root ç”¨æˆ·è¿è¡Œï¼ˆUID 1000ï¼‰
- âœ… èµ„æºé™åˆ¶ï¼ˆå¯é…ç½®ï¼‰
- âœ… ç½‘ç»œéš”ç¦»ï¼ˆé»˜è®¤ `network: "none"`ï¼‰
- âœ… åªè¯»æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰
- âœ… è‡ªåŠ¨æ¸…ç†ç©ºé—²å®¹å™¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

#### 1ï¸âƒ£ ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥
- âœ… æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼ˆUbuntu/Debian/Fedora/CentOS ç­‰ï¼‰
- âœ… CPU æ¶æ„ï¼ˆAMD64/ARM64ï¼‰
- âœ… å†…æ ¸ç‰ˆæœ¬
- âœ… å¿…éœ€å·¥å…·ï¼ˆbash, curl, grep, awk, sedï¼‰

#### 2ï¸âƒ£ Docker ç¯å¢ƒæ£€æŸ¥
- âœ… Docker æ˜¯å¦å·²å®‰è£…
- âœ… Docker daemon æ˜¯å¦è¿è¡Œ
- âœ… Docker ç”¨æˆ·æƒé™æ£€æŸ¥
- âœ… Docker Compose ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
- âœ… Docker å­˜å‚¨é©±åŠ¨ä¿¡æ¯
- âœ… Docker ç³»ç»Ÿç»Ÿè®¡ï¼ˆå®¹å™¨æ•°ã€é•œåƒæ•°ï¼‰

#### 3ï¸âƒ£ ç¡¬ä»¶èµ„æºè¯„ä¼°
- âœ… CPU æ ¸å¿ƒæ•°å’Œå‹å·
- âœ… æ€»å†…å­˜å’Œå¯ç”¨å†…å­˜
- âœ… ç£ç›˜ç©ºé—´ï¼ˆé¡¹ç›®åˆ†åŒºå’Œ Docker åˆ†åŒºï¼‰
- âœ… æ ¹æ®ç¡¬ä»¶è‡ªåŠ¨æ¨èèµ„æºé…ç½®

#### 4ï¸âƒ£ éƒ¨ç½²èµ„æºä¼°ç®—
- âœ… é¢„ä¼°é•œåƒå¤§å°ï¼ˆæ ¹æ®é€‰æ‹©çš„ç»„ä»¶ï¼‰
- âœ… è®¡ç®—æ„å»ºæ—¶éœ€è¦çš„ä¸´æ—¶ç©ºé—´
- âœ… æ˜¾ç¤º Docker é•œåƒå­˜å‚¨ä½ç½®
- âœ… ç£ç›˜ç©ºé—´éœ€æ±‚æ˜ç»†

#### 5ï¸âƒ£ éƒ¨ç½²å‰ç¡®è®¤
- âœ… æ˜¾ç¤ºå®Œæ•´çš„ç³»ç»Ÿä¿¡æ¯æ‘˜è¦
- âœ… åˆ—å‡ºå°†è¦æ‰§è¡Œçš„æ“ä½œ
- âœ… é¢„ä¼°æ„å»ºæ—¶é—´
- âœ… èµ„æºä¸è¶³æ—¶å‘å‡ºè­¦å‘Š
- âœ… ç”¨æˆ·ç¡®è®¤åæ‰å¼€å§‹æ„å»º

### ç³»ç»Ÿè¦æ±‚

**æœ€ä½é…ç½®ï¼š**
- CPU: 2 æ ¸å¿ƒ
- å†…å­˜: 4 GB RAM
- ç£ç›˜: 10 GB å¯ç”¨ç©ºé—´ï¼ˆDocker åˆ†åŒºï¼‰
- æ“ä½œç³»ç»Ÿ: Linux (Ubuntu 20.04+, Debian 11+, Fedora 35+, CentOS 8+)
- Docker: 20.10+

**æ¨èé…ç½®ï¼š**
- CPU: 4+ æ ¸å¿ƒ
- å†…å­˜: 8+ GB RAM
- ç£ç›˜: 20+ GB å¯ç”¨ç©ºé—´ï¼ˆDocker åˆ†åŒºï¼‰
- SSD å­˜å‚¨ï¼ˆæ„å»ºé€Ÿåº¦æ›´å¿«ï¼‰

### ä¸€é”®æ„å»ºï¼ˆæ¨èï¼‰

```bash
cd /path/to/openclaw
./scripts/sandbox-ultimate-setup.sh
```

è„šæœ¬ä¼šå¼•å¯¼ä½ å®Œæˆï¼š

1. âœ… ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ï¼ˆè‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå’Œå¿…éœ€å·¥å…·ï¼‰
2. âœ… Docker ç¯å¢ƒæ£€æŸ¥ï¼ˆéªŒè¯ Docker å®‰è£…å’Œæƒé™ï¼‰
3. âœ… ç¡¬ä»¶èµ„æºè¯„ä¼°ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ç©ºé—´ï¼‰
4. âœ… éƒ¨ç½²èµ„æºä¼°ç®—ï¼ˆé•œåƒå¤§å°å’Œç©ºé—´éœ€æ±‚ï¼‰
5. âœ… æ˜¾ç¤ºæ„å»ºé…ç½®é€‰é¡¹ï¼ˆæ”¯æŒè‡ªå®šä¹‰ï¼‰
6. âœ… ç”Ÿæˆ Dockerfileï¼ˆæ ¹æ®é€‰æ‹©è‡ªåŠ¨ç”Ÿæˆï¼‰
7. âœ… **éƒ¨ç½²å‰ç¡®è®¤**ï¼ˆæ˜¾ç¤ºå®Œæ•´æ‘˜è¦ï¼Œç”¨æˆ·ç¡®è®¤åæ„å»ºï¼‰
8. âœ… æ„å»º Docker é•œåƒï¼ˆæ˜¾ç¤ºè¿›åº¦å’Œæ—¶é—´ï¼‰
9. âœ… æ˜¾ç¤ºåç»­é…ç½®æ­¥éª¤ï¼ˆåŒ…å«æ ¹æ®ç¡¬ä»¶æ¨èçš„é…ç½®ï¼‰

### äº¤äº’å¼é…ç½®

è„šæœ¬æ”¯æŒè‡ªå®šä¹‰å®‰è£…é€‰é¡¹ï¼š

```bash
# é»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰
./scripts/sandbox-ultimate-setup.sh
# æŒ‰å›è½¦ä½¿ç”¨é»˜è®¤é…ç½®

# è‡ªå®šä¹‰é…ç½®
./scripts/sandbox-ultimate-setup.sh
# æŒ‰ 'c' è¿›å…¥è‡ªå®šä¹‰æ¨¡å¼
```

### æ‰‹åŠ¨æ„å»º

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨äº¤äº’å¼è„šæœ¬ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ„å»ºï¼š

```bash
docker build -t openclaw-sandbox-ultimate:bookworm-slim \
  -f Dockerfile.sandbox-ultimate .
```

**æ³¨æ„**: æ‰‹åŠ¨æ„å»ºä¼šè·³è¿‡æ‰€æœ‰æ£€æŸ¥æµç¨‹ï¼Œå»ºè®®ä»…åœ¨ç†Ÿæ‚‰ç¯å¢ƒæ—¶ä½¿ç”¨ã€‚

---

## ğŸ“‹ è¯¦ç»†æ£€æŸ¥æµç¨‹è¯´æ˜

### æ£€æŸ¥é˜¶æ®µ 1ï¼šç³»ç»Ÿç¯å¢ƒæ£€æŸ¥

è„šæœ¬é¦–å…ˆæ£€æŸ¥ä½ çš„ç³»ç»ŸåŸºç¡€ç¯å¢ƒï¼š

```bash
./scripts/sandbox-ultimate-setup.sh
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  1ï¸âƒ£  ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[INFO] æ£€æŸ¥æ“ä½œç³»ç»Ÿ...
[âœ“] æ“ä½œç³»ç»Ÿ: Ubuntu 24.04 LTS
[âœ“] CPU æ¶æ„: AMD64 (x86_64)
[âœ“] å†…æ ¸ç‰ˆæœ¬: 6.8.0-90-generic

[INFO] æ£€æŸ¥å¿…éœ€çš„ç³»ç»Ÿå·¥å…·...
[âœ“] bash: /usr/bin/bash
[âœ“] curl: /usr/bin/curl
[âœ“] grep: /usr/bin/grep
[âœ“] awk: /usr/bin/awk
[âœ“] sed: /usr/bin/sed

[âœ“] ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥å®Œæˆ âœ“
```

**æ£€æŸ¥é¡¹ç›®ï¼š**
- âœ… æ“ä½œç³»ç»Ÿç‰ˆæœ¬è¯†åˆ«
- âœ… CPU æ¶æ„å…¼å®¹æ€§ï¼ˆAMD64/ARM64ï¼‰
- âœ… å†…æ ¸ç‰ˆæœ¬
- âœ… å¿…éœ€å‘½ä»¤è¡Œå·¥å…·

**å¤±è´¥å¤„ç†ï¼š**
- å¦‚æœç¼ºå¤±å¿…éœ€å·¥å…·ï¼Œè„šæœ¬ä¼šé€€å‡ºå¹¶æç¤ºå®‰è£…æ–¹æ³•

---

### æ£€æŸ¥é˜¶æ®µ 2ï¼šDocker ç¯å¢ƒæ£€æŸ¥

æ¥ä¸‹æ¥æ£€æŸ¥ Docker ç¯å¢ƒï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  2ï¸âƒ£  Docker ç¯å¢ƒæ£€æŸ¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[INFO] æ£€æŸ¥ Docker å®‰è£…...
[âœ“] Docker å·²å®‰è£…: 27.3.1
[âœ“] Docker daemon æ­£åœ¨è¿è¡Œ
[âœ“] å½“å‰ç”¨æˆ·å¯ä»¥æ‰§è¡Œ Docker å‘½ä»¤
[âœ“] Docker Compose: 2.30.3
[âœ“] å­˜å‚¨é©±åŠ¨: overlay2

[INFO] Docker ç¯å¢ƒç»Ÿè®¡:
  æœåŠ¡å™¨ç‰ˆæœ¬:    27.3.1
  æ€»å®¹å™¨æ•°:      15
  è¿è¡Œä¸­å®¹å™¨:    3
  é•œåƒæ€»æ•°:      42

[âœ“] Docker ç¯å¢ƒæ£€æŸ¥å®Œæˆ âœ“
```

**æ£€æŸ¥é¡¹ç›®ï¼š**
- âœ… Docker å¯æ‰§è¡Œæ–‡ä»¶ä½ç½®
- âœ… Docker ç‰ˆæœ¬ä¿¡æ¯
- âœ… Docker daemon è¿è¡ŒçŠ¶æ€
- âœ… **ç”¨æˆ·æƒé™æ£€æŸ¥**ï¼ˆæ˜¯å¦éœ€è¦ sudoï¼‰
- âœ… Docker Compose ç‰ˆæœ¬
- âœ… å­˜å‚¨é©±åŠ¨ç±»å‹
- âœ… ç°æœ‰å®¹å™¨å’Œé•œåƒç»Ÿè®¡

**æƒé™ä¸è¶³æ—¶çš„æç¤ºï¼š**
```
[WARN] å½“å‰ç”¨æˆ·æ²¡æœ‰ Docker æƒé™
[WARN] æ¯æ¬¡æ‰§è¡Œ docker å‘½ä»¤éœ€è¦ sudo
[WARN] å»ºè®®å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„:
  sudo usermod -aG docker $USER
  newgrp docker
```

**å¤±è´¥å¤„ç†ï¼š**
- Docker æœªå®‰è£…ï¼šæä¾›å®˜æ–¹å®‰è£…é“¾æ¥
- daemon æœªè¿è¡Œï¼šæ ¹æ®æ“ä½œç³»ç»Ÿæä¾›å¯åŠ¨å‘½ä»¤

---

### æ£€æŸ¥é˜¶æ®µ 3ï¼šç¡¬ä»¶èµ„æºè¯„ä¼°

è¯„ä¼°ç³»ç»Ÿç¡¬ä»¶èµ„æºå¹¶ç»™å‡ºæ¨èé…ç½®ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  3ï¸âƒ£  ç¡¬ä»¶èµ„æºè¯„ä¼°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[INFO] è¯„ä¼° CPU èµ„æº...
[âœ“] CPU å‹å·: Intel(R) Core(TM) i7-12700H
[âœ“] CPU æ ¸å¿ƒ: 12 ç‰©ç†æ ¸å¿ƒ / 20 çº¿ç¨‹

[INFO] è¯„ä¼°å†…å­˜èµ„æº...
[âœ“] æ€»å†…å­˜: 15.26 GB
[âœ“] å¯ç”¨å†…å­˜: 10.45 GB (ä½¿ç”¨ç‡: 31.5%)

[INFO] è¯„ä¼°ç£ç›˜ç©ºé—´...
[âœ“] é¡¹ç›®æ‰€åœ¨åˆ†åŒº: /mnt/500G-1/Development/openclaw
[âœ“] æ€»å®¹é‡: 459G
[âœ“] å·²ç”¨: 319G (69%)
[âœ“] å¯ç”¨: 117G

[INFO] è¯„ä¼° Docker å­˜å‚¨ç©ºé—´...
[âœ“] Docker æ•°æ®ç›®å½•: /var/lib/docker
[âœ“] Docker å¯ç”¨ç©ºé—´: 117G

[âœ“] ç¡¬ä»¶èµ„æºè¯„ä¼°å®Œæˆ âœ“
```

**æ™ºèƒ½æ¨èï¼š**

æ ¹æ®ç¡¬ä»¶èµ„æºï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ¨è Docker èµ„æºé™åˆ¶ï¼š

| ç¡¬ä»¶é…ç½® | CPU æ¨è | å†…å­˜æ¨è |
|---------|---------|---------|
| â‰¥8 æ ¸ / â‰¥16GB | `cpus: "4"` | `memory: "4g", memorySwap: "8g"` |
| 4-7 æ ¸ / 8-15GB | `cpus: "2"` | `memory: "2g", memorySwap: "4g"` |
| 2-3 æ ¸ / 4-7GB | `cpus: "1"` | `memory: "1g", memorySwap: "2g"` |
| <2 æ ¸ / <4GB | `cpus: "0.5"` | `memory: "512m", memorySwap: "1g"` |

**è­¦å‘Šæç¤ºï¼š**
- CPU ä¸è¶³æ—¶ï¼šå»ºè®®å…³é—­å…¶ä»–åº”ç”¨
- å†…å­˜ä¸è¶³æ—¶ï¼šå¯èƒ½å½±å“æ€§èƒ½
- ç£ç›˜ä¸è¶³æ—¶ï¼š**é˜»æ­¢æ„å»ºå¹¶æç¤ºæ¸…ç†ç©ºé—´**

---

### æ£€æŸ¥é˜¶æ®µ 4ï¼šéƒ¨ç½²èµ„æºä¼°ç®—

ä¼°ç®—é•œåƒå¤§å°å’Œç©ºé—´éœ€æ±‚ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  4ï¸âƒ£  éƒ¨ç½²èµ„æºä¼°ç®—
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š é•œåƒå¤§å°ä¼°ç®—:
  åŸºç¡€é•œåƒ (Debian):       ~800 MB
  æµè§ˆå™¨ç»„ä»¶:             ~400 MB
  Node.js + npm:          ~100 MB
  pnpm:                   ~10 MB
  Bun:                    ~20 MB
  Go (Golang):            ~200 MB
  Rust + Cargo:           ~100 MB
  Python å·¥å…·:            ~50 MB
  FFmpeg:                 ~80 MB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  é¢„è®¡é•œåƒå¤§å°:           ~1760 MB

ğŸ’¾ ç£ç›˜ç©ºé—´éœ€æ±‚:
  æ„å»ºæ—¶ä¸´æ—¶ç©ºé—´:         ~5280 MB
  æœ€ç»ˆé•œåƒå ç”¨:           ~1760 MB
  Docker ç¼“å­˜:            ~500 MB (å¯æ¸…ç†)

  Docker é•œåƒå­˜å‚¨ä½ç½®: /var/lib/docker

[âœ“] èµ„æºä¼°ç®—å®Œæˆ âœ“
```

**è¯´æ˜ï¼š**
- åŸºç¡€é•œåƒï¼šDebian Bookworm Slim åŸºç¡€å±‚
- æµè§ˆå™¨ç»„ä»¶ï¼šChromium + Xvfb + noVNC
- ç¼–ç¨‹å·¥å…·ï¼šå„è¯­è¨€è¿è¡Œæ—¶å’ŒåŒ…ç®¡ç†å™¨
- ä¸´æ—¶ç©ºé—´ï¼šæ„å»ºè¿‡ç¨‹ä¸­çš„ç¼“å­˜å’Œä¸­é—´å±‚
- Docker ç¼“å­˜ï¼šæ„å»ºå®Œæˆåå¯æ¸…ç†

**å­˜å‚¨ä½ç½®ï¼š**
- Linux: `/var/lib/docker`
- macOS: `/var/lib/docker` æˆ– `~/Library/Containers/com.docker.docker`
- Windows: `\\wsl$\docker-desktop-data\data\docker`

---

### æ£€æŸ¥é˜¶æ®µ 5ï¼šéƒ¨ç½²å‰ç¡®è®¤

æœ€åæ˜¾ç¤ºå®Œæ•´çš„éƒ¨ç½²æ‘˜è¦å¹¶è¦æ±‚ç¡®è®¤ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     éƒ¨ç½²å‰ç¡®è®¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç³»ç»Ÿä¿¡æ¯:
  æ“ä½œç³»ç»Ÿ:       Ubuntu 24.04 LTS
  CPU æ¶æ„:       AMD64 (x86_64)
  Docker ç‰ˆæœ¬:    27.3.1

å½“å‰ç³»ç»ŸçŠ¶æ€:
  CPU:            12 æ ¸ / 15.26 GB RAM
  ç£ç›˜å¯ç”¨:       117G
  Docker å¯ç”¨:    117G

å°†è¦æ‰§è¡Œçš„æ“ä½œ:
  â€¢ ä¸‹è½½ Debian åŸºç¡€é•œåƒ
  â€¢ å®‰è£…ç³»ç»ŸåŒ…å’Œç¼–ç¨‹å·¥å…·
  â€¢ æ„å»º Docker é•œåƒ (~1760MB)
  â€¢ éœ€è¦ä¸´æ—¶ç©ºé—´ ~5280MB

é¢„è®¡æ—¶é—´: 5-15 åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦å’Œç¡¬ä»¶æ€§èƒ½ï¼‰

æ˜¯å¦å¼€å§‹æ„å»ºï¼Ÿ
  [Enter] æ˜¯ï¼Œå¼€å§‹æ„å»º
  [n]     å¦ï¼Œå–æ¶ˆéƒ¨ç½²
  [c]     æŸ¥çœ‹è¯¦ç»†é…ç½®

è¯·é€‰æ‹©:
```

**é€‰é¡¹è¯´æ˜ï¼š**
- **Enter**: å¼€å§‹æ„å»ºï¼ˆé»˜è®¤é€‰é¡¹ï¼‰
- **n**: å–æ¶ˆéƒ¨ç½²ï¼Œé€€å‡ºè„šæœ¬
- **c**: æŸ¥çœ‹è¯¦ç»†çš„èµ„æºé…ç½®å»ºè®®

**é€‰æ‹© "c" åçš„è¾“å‡ºï¼š**

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     èµ„æºé…ç½®å»ºè®®
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç¡¬ä»¶è¯„ä¼°ç»“æœ:
  CPU:          ä¼˜ç§€ (â‰¥8 æ ¸)
  å†…å­˜:         è‰¯å¥½ (8-15GB)
  ç£ç›˜ç©ºé—´:     å……è¶³ (â‰¥20GB)

æ¨èçš„ Docker èµ„æºé™åˆ¶:
  cpus: "4"
  memory: "4g", memorySwap: "8g"

å»ºè®®é…ç½® (~/.openclaw/config):
  agents.defaults.sandbox.docker:
    cpus: "4"
    memory: "4g", memorySwap: "8g"

æŒ‰ Enter é”®ç»§ç»­ï¼Œæˆ– Ctrl+C é€€å‡º...
```

**èµ„æºä¸è¶³è­¦å‘Šï¼š**

å¦‚æœ CPU <2 æ ¸æˆ–å†…å­˜ <4GB æˆ–ç£ç›˜ <5GBï¼Œä¼šæ˜¾ç¤ºï¼š

```
âš ï¸  è­¦å‘Š: ç³»ç»Ÿèµ„æºä¸è¶³ï¼Œå¯èƒ½æ— æ³•å®Œæˆæ„å»ºï¼

æ˜¯å¦ç»§ç»­ï¼Ÿå»ºè®®å…ˆå‡çº§ç¡¬ä»¶é…ç½®ã€‚[y/N]:
```

---

## ğŸ“– è¯¦ç»†å®‰è£…æ­¥éª¤
  -f Dockerfile.sandbox-ultimate .
```

---

## ğŸ“– è¯¦ç»†å®‰è£…æ­¥éª¤

### æ­¥éª¤ 1ï¼šæ„å»ºé•œåƒ

ä½¿ç”¨è„šæœ¬æ„å»ºï¼ˆæ¨èï¼‰ï¼š

```bash
./scripts/sandbox-ultimate-setup.sh
```

æ„å»ºè¿‡ç¨‹ä¼šï¼š

1. ä¸‹è½½ Debian åŸºç¡€é•œåƒ (~80MB)
2. å®‰è£…ç³»ç»ŸåŒ…å’Œç¼–ç¨‹å·¥å…·
3. å®‰è£… Node.js ç”Ÿæ€å·¥å…·ï¼ˆnpm, pnpm, Bunï¼‰
4. å®‰è£… Go å’Œ Rust
5. å®‰è£… Chromium å’Œæµè§ˆå™¨ä¾èµ–
6. å¤åˆ¶æµè§ˆå™¨å…¥å£è„šæœ¬

**é¢„è®¡æ—¶é—´**: 5-15 åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

**é•œåƒå¤§å°**: çº¦ 1.2-1.5 GB

### æ­¥éª¤ 2ï¼šé…ç½® OpenClaw

ç¼–è¾‘ `~/.openclaw/config`ï¼š

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",          // off | non-main | all
        scope: "agent",             // session | agent | shared
        workspaceAccess: "rw",      // none | ro | rw
        docker: {
          image: "openclaw-sandbox-ultimate:bookworm-slim",
          workdir: "/workspace",
          readOnlyRoot: true,
          tmpfs: ["/tmp", "/var/tmp", "/run"],
          network: "none",           // å¦‚æœéœ€è¦ç½‘ç»œè®¿é—®ï¼Œæ”¹ä¸º "bridge"
          user: "1000:1000",
          capDrop: ["ALL"],
          env: {
            LANG: "C.UTF-8",
            PATH: "/opt/bun/bin:/usr/local/bin:/usr/bin:/bin",
          },
          pidsLimit: 512,            // å¢åŠ è¿›ç¨‹é™åˆ¶ï¼ˆé»˜è®¤ 256ï¼‰
          memory: "2g",              // å¢åŠ å†…å­˜é™åˆ¶ï¼ˆé»˜è®¤ 1gï¼‰
          memorySwap: "4g",
          cpus: 2,                   // å¢åŠ  CPU é™åˆ¶ï¼ˆé»˜è®¤ 1ï¼‰
        },
        browser: {
          enabled: true,             // å¯ç”¨æµè§ˆå™¨å·¥å…·
        },
        prune: {
          idleHours: 24,
          maxAgeDays: 7,
        },
      },
    },
  },
  tools: {
    sandbox: {
      tools: {
        allow: [
          "exec",
          "process",
          "read",
          "write",
          "edit",
          "browser",                 // å…è®¸æµè§ˆå™¨å·¥å…·
          "sessions_list",
          "sessions_history",
          "sessions_send",
          "sessions_spawn",
          "session_status",
        ],
        deny: ["canvas", "nodes", "cron", "discord", "gateway"],
      },
    },
  },
}
```

### æ­¥éª¤ 3ï¼šé‡å¯ Gateway

**Linux (systemd):**

```bash
sudo systemctl restart openclaw-gateway
```

**macOS (èœå•æ åº”ç”¨):**

1. æ‰“å¼€ OpenClaw åº”ç”¨
2. ç‚¹å‡»èœå•æ å›¾æ ‡
3. é€‰æ‹© "Restart Gateway"

**æ‰‹åŠ¨è¿è¡Œ:**

```bash
pkill -f openclaw-gateway
nohup openclaw gateway run --bind loopback --port 18789 \
  > /tmp/openclaw-gateway.log 2>&1 &
```

### æ­¥éª¤ 4ï¼šéªŒè¯å®‰è£…

æ£€æŸ¥æ²™ç›’å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š

```bash
docker ps | grep openclaw
```

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
CONTAINER ID   IMAGE                                            COMMAND                  ...
abc123def456   openclaw-sandbox-ultimate:bookworm-slim          "openclaw-sandbox-brâ€¦"   ...
```

æµ‹è¯•æµè§ˆå™¨å·¥å…·ï¼ˆåœ¨ Agent ä¼šè¯ä¸­ï¼‰ï¼š

```
@agent æ‰“å¼€æµè§ˆå™¨è®¿é—® https://example.com
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ²™ç›’æ¨¡å¼é€‰æ‹©

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `"off"` | å®Œå…¨å…³é—­æ²™ç›’ | å®Œå…¨å¯ä¿¡ç¯å¢ƒï¼Œä¸éœ€è¦éš”ç¦» |
| `"non-main"` | ä»…éä¸»ä¼šè¯ä½¿ç”¨æ²™ç›’ | **é»˜è®¤æ¨è**ï¼Œå¹³è¡¡æ€§èƒ½å’Œå®‰å…¨ |
| `"all"` | æ‰€æœ‰ä¼šè¯éƒ½ä½¿ç”¨æ²™ç›’ | æœ€é«˜å®‰å…¨çº§åˆ«ï¼Œå¤„ç†ä¸å¯ä¿¡ä»£ç  |

### å®¹å™¨èŒƒå›´é€‰æ‹©

| èŒƒå›´ | è¯´æ˜ | æ€§èƒ½ | éš”ç¦»æ€§ |
|------|------|------|--------|
| `"session"` | æ¯ä¸ªä¼šè¯ä¸€ä¸ªå®¹å™¨ | ä½ | â­â­â­â­â­ |
| `"agent"` | æ¯ä¸ª agent ä¸€ä¸ªå®¹å™¨ | ä¸­ | â­â­â­â­ |
| `"shared"` | æ‰€æœ‰ä¼šè¯å…±äº«å®¹å™¨ | é«˜ | â­â­ |

**æ¨è**: ä½¿ç”¨é»˜è®¤çš„ `"agent"` æ¨¡å¼ï¼Œå¹³è¡¡æ€§èƒ½å’Œéš”ç¦»æ€§ã€‚

### å·¥ä½œåŒºè®¿é—®çº§åˆ«

| çº§åˆ« | è¯´æ˜ | é£é™© |
|------|------|------|
| `"none"` | æ²™ç›’è‡ªæœ‰å·¥ä½œåŒº | â­ æœ€å®‰å…¨ |
| `"ro"` | åªè¯»æŒ‚è½½ agent å·¥ä½œåŒº | â­â­ å®‰å…¨ |
| `"rw"` | è¯»å†™æŒ‚è½½ agent å·¥ä½œåŒº | â­â­â­ éœ€è¦ä¿¡ä»» agent |

**æ¨è**: å¦‚æœ agent éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä½¿ç”¨ `"rw"`ï¼›å¦åˆ™ä½¿ç”¨ `"ro"` æˆ– `"none"`ã€‚

### ç½‘ç»œé…ç½®

```json5
{
  sandbox: {
    docker: {
      network: "none",      // æ— ç½‘ç»œè®¿é—®ï¼ˆé»˜è®¤ï¼Œæœ€å®‰å…¨ï¼‰
      // network: "bridge", // å…è®¸ç½‘ç»œè®¿é—®ï¼ˆéœ€è¦ä¸‹è½½å·¥å…·æ—¶ï¼‰
      // network: "host",   // ä¸»æœºç½‘ç»œï¼ˆä¸æ¨èï¼‰
    }
  }
}
```

**æ³¨æ„**: å¦‚æœ agent éœ€è¦è®¿é—®äº’è”ç½‘ï¼ˆå¦‚ `npm install`, `git clone`ï¼‰ï¼Œéœ€è¦å°† `network` è®¾ç½®ä¸º `"bridge"`ã€‚

---

## ğŸŒ æµè§ˆå™¨ä½¿ç”¨

### ç«¯å£è¯´æ˜

| ç«¯å£ | åè®® | è¯´æ˜ |
|------|------|------|
| 9222 | CDP | Chrome DevTools Protocolï¼ˆç”¨äº Playwright, Puppeteerï¼‰ |
| 5900 | VNC | æ ‡å‡† VNC åè®® |
| 6080 | HTTP | noVNC Web å®¢æˆ·ç«¯ |

### è®¿é—®æµè§ˆå™¨

**æ–¹æ³• 1: é€šè¿‡ Agent å‘½ä»¤**

åœ¨ Agent ä¼šè¯ä¸­ä½¿ç”¨æµè§ˆå™¨å·¥å…·ï¼š

```
@agent æ‰“å¼€æµè§ˆå™¨è®¿é—® https://github.comï¼Œæˆªå›¾å¹¶åˆ†æ
```

**æ–¹æ³• 2: ç›´æ¥è®¿é—®ï¼ˆè°ƒè¯•ç”¨ï¼‰**

å¦‚æœå¯ç”¨äº†ç½‘ç»œè®¿é—®ï¼ˆ`network: "bridge"`ï¼‰ï¼Œä½ å¯ä»¥ä»ä¸»æœºè®¿é—®ï¼š

```bash
# æŸ¥æ‰¾å®¹å™¨ç«¯å£æ˜ å°„
docker port <container-id> 6080

# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
# http://localhost:6080
```

**æ–¹æ³• 3: ä½¿ç”¨ VNC å®¢æˆ·ç«¯**

```bash
# ä½¿ç”¨ vncviewer
vncviewer localhost:5900
```

### æµè§ˆå™¨è‡ªåŠ¨åŒ–ç¤ºä¾‹

æ²™ç›’å†…ç½®äº†å®Œæ•´çš„ Chromiumï¼Œæ”¯æŒï¼š

- âœ… Playwright
- âœ… Puppeteer
- âœ Selenium WebDriver

**Playwright ç¤ºä¾‹**:

```javascript
const { chromium } = require('playwright');

const browser = await chromium.connect('ws://localhost:9222');
const page = await browser.newPage();
await page.goto('https://example.com');
await page.screenshot({ path: '/workspace/screenshot.png' });
await browser.close();
```

---

## ğŸ› ï¸ ç¼–ç¨‹å·¥å…·æ¸…å•

### JavaScript / TypeScript

```bash
# Node.js ç‰ˆæœ¬
node --version

# npm ç‰ˆæœ¬
npm --version

# pnpm å·²å…¨å±€å®‰è£…
pnpm --version

# Bun å·²å…¨å±€å®‰è£…
bun --version
```

### Go

```bash
go version
```

### Rust

```bash
rustc --version
cargo --version
```

### Python

```bash
python3 --version
pip --version

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv /workspace/venv
source /workspace/venv/bin/activate
```

### FFmpeg

```bash
ffmpeg -version
```

---

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ PATH

å¦‚æœä½ çš„å·¥å…·å®‰è£…åœ¨éæ ‡å‡†è·¯å¾„ï¼š

```json5
{
  sandbox: {
    docker: {
      env: {
        PATH: "/custom/bin:/opt/bun/bin:/usr/local/bin:/usr/bin:/bin",
      },
    },
  },
}
```

### æŒ‚è½½é¢å¤–ç›®å½•

å¦‚æœéœ€è¦è®¿é—®ä¸»æœºä¸Šçš„å…¶ä»–ç›®å½•ï¼š

```bash
# æ–¹æ³• 1: ä¿®æ”¹ docker-compose.ymlï¼ˆå¦‚æœä½¿ç”¨å®¹å™¨åŒ– Gatewayï¼‰
volumes:
  - /path/on/host:/path/in/container:rw

# æ–¹æ³• 2: ä½¿ç”¨ OPENCLAW_EXTRA_MOUNTS
export OPENCLAW_EXTRA_MOUNTS="/path/on/host:/path/in/container:rw"
./docker-setup.sh
```

### å®‰è£…é¢å¤–çš„ç³»ç»ŸåŒ…

ç¼–è¾‘ `Dockerfile.sandbox-ultimate`ï¼š

```dockerfile
RUN apt-get update \
  && apt-get install -y --no-install-recommends \
    your-package-here \
  && rm -rf /var/lib/apt/lists/*
```

ç„¶åé‡æ–°æ„å»ºé•œåƒã€‚

### èµ„æºé™åˆ¶è°ƒæ•´

æ ¹æ®ä½ çš„éœ€æ±‚è°ƒæ•´èµ„æºé™åˆ¶ï¼š

```json5
{
  sandbox: {
    docker: {
      pidsLimit: 1024,       // å¢åŠ è¿›ç¨‹æ•°é™åˆ¶
      memory: "4g",          // å¢åŠ å†…å­˜
      memorySwap: "8g",
      cpus: 4,               // å¢åŠ  CPU æ ¸å¿ƒæ•°
      ulimits: {
        nofile: { soft: 4096, hard: 8192 },
        nproc: 1024,
      },
    },
  },
}
```

### å¤š Agent é…ç½®

ä¸ºä¸åŒçš„ agent é…ç½®ä¸åŒçš„æ²™ç›’çº§åˆ«ï¼š

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",
        workspaceAccess: "rw",
        browser: { enabled: true },
      },
    },
    list: [
      {
        agentId: "personal-assistant",
        name: "Personal Assistant",
        // ç»§æ‰¿ defaultsï¼Œæœ‰å®Œæ•´æƒé™
      },
      {
        agentId: "work-assistant",
        name: "Work Assistant",
        sandbox: {
          workspaceAccess: "ro",        // åªè¯»å·¥ä½œåŒº
          browser: { enabled: false },   // ç¦ç”¨æµè§ˆå™¨
        },
        tools: {
          sandbox: {
            tools: {
              deny: ["write", "edit"],   // ç¦æ­¢ä¿®æ”¹æ–‡ä»¶
            },
          },
        },
      },
      {
        agentId: "public-bot",
        name: "Public Bot",
        sandbox: {
          mode: "all",                   // å¼ºåˆ¶æ²™ç›’
          workspaceAccess: "none",       // æ— å·¥ä½œåŒºè®¿é—®
          browser: { enabled: false },
        },
        tools: {
          sandbox: {
            tools: {
              allow: ["exec", "read"],   // ä»…å…è®¸æ‰§è¡Œå’Œè¯»å–
              deny: ["write", "edit", "browser"],
            },
          },
        },
      },
    ],
  },
}
```

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: é•œåƒæ„å»ºå¤±è´¥

**ç—‡çŠ¶**: æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°ç½‘ç»œé”™è¯¯æˆ–åŒ…å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ¸…ç† Docker æ„å»ºç¼“å­˜
docker builder prune -a

# é‡æ–°æ„å»º
./scripts/sandbox-ultimate-setup.sh
```

### é—®é¢˜ 2: å®¹å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: `docker ps` çœ‹ä¸åˆ°æ²™ç›’å®¹å™¨

**æ£€æŸ¥æ­¥éª¤**:

```bash
# æ£€æŸ¥æ—¥å¿—
docker logs <container-id>

# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
docker images | grep openclaw-sandbox-ultimate

# æ‰‹åŠ¨è¿è¡Œæµ‹è¯•
docker run --rm openclaw-sandbox-ultimate:bookworm-slim node --version
```

### é—®é¢˜ 3: æµè§ˆå™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: Agent æŠ¥å‘Šæµè§ˆå™¨è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

1. ç¡®è®¤æµè§ˆå™¨å·¥å…·å·²å¯ç”¨ï¼š
   ```json5
   { sandbox: { browser: { enabled: true } } }
   ```

2. æ£€æŸ¥ç½‘ç»œé…ç½®ï¼š
   ```json5
   { sandbox: { docker: { network: "bridge" } } }
   ```

3. éªŒè¯ CDP ç«¯å£ï¼š
   ```bash
   docker exec <container-id> curl -s http://localhost:9222/json/version
   ```

### é—®é¢˜ 4: æƒé™é”™è¯¯ (EACCES)

**ç—‡çŠ¶**: å®¹å™¨å†…æ— æ³•å†™å…¥ `/workspace`

**è§£å†³æ–¹æ¡ˆ**:

```bash
# ç¡®ä¿å·¥ä½œåŒºç›®å½•æƒé™æ­£ç¡®
sudo chown -R 1000:1000 ~/.openclaw/workspace

# æˆ–è€…ä¿®æ”¹å®¹å™¨ç”¨æˆ·ä¸º rootï¼ˆä¸æ¨èï¼‰
{
  sandbox: {
    docker: {
      user: "0:0",  // root ç”¨æˆ·
    },
  },
}
```

### é—®é¢˜ 5: å·¥å…·æ‰¾ä¸åˆ°

**ç—‡çŠ¶**: `bash: node: command not found`

**è§£å†³æ–¹æ¡ˆ**:

æ£€æŸ¥ PATH é…ç½®ï¼š

```bash
docker exec <container-id> printenv PATH
```

åº”è¯¥åœ¨è¾“å‡ºä¸­çœ‹åˆ°ï¼š
```
/opt/bun/bin:/usr/local/bin:/usr/bin:/bin
```

å¦‚æœç¼ºå°‘è·¯å¾„ï¼Œåœ¨é…ç½®ä¸­æ·»åŠ ï¼š

```json5
{
  sandbox: {
    docker: {
      env: {
        PATH: "/opt/bun/bin:/usr/local/bin:/usr/bin:/bin",
      },
    },
  },
}
```

### é—®é¢˜ 6: å†…å­˜ä¸è¶³

**ç—‡çŠ¶**: å®¹å™¨é¢‘ç¹é‡å¯ï¼Œæ—¥å¿—æ˜¾ç¤º "Killed"

**è§£å†³æ–¹æ¡ˆ**:

å¢åŠ å†…å­˜é™åˆ¶ï¼š

```json5
{
  sandbox: {
    docker: {
      memory: "4g",
      memorySwap: "8g",
    },
  },
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### å»ºè®® 1: è°ƒæ•´å®¹å™¨çš„ scope

å¦‚æœä¸éœ€è¦ä¼šè¯çº§éš”ç¦»ï¼š

```json5
{
  sandbox: {
    scope: "agent",  // è€Œä¸æ˜¯ "session"
  },
}
```

è¿™æ ·å¯ä»¥å‡å°‘å®¹å™¨åˆ›å»ºå¼€é”€ã€‚

### å»ºè®® 2: å¯ç”¨å·¥ä½œåŒºç¼“å­˜

å¯¹äºé¢‘ç¹è®¿é—®çš„å·¥å…·ï¼š

```json5
{
  sandbox: {
    docker: {
      tmpfs: [
        "/tmp",
        "/var/tmp",
        "/run",
        "/workspace/node_modules",  // ç¼“å­˜ node_modules
      ],
    },
  },
}
```

### å»ºè®® 3: è°ƒæ•´æ¸…ç†ç­–ç•¥

é¿å…é¢‘ç¹é‡å»ºå®¹å™¨ï¼š

```json5
{
  sandbox: {
    prune: {
      idleHours: 168,  // 7 å¤©è€Œä¸æ˜¯ 24 å°æ—¶
      maxAgeDays: 30,   // 30 å¤©è€Œä¸æ˜¯ 7 å¤©
    },
  },
}
```

### å»ºè®® 4: ä½¿ç”¨å…±äº«ç½‘ç»œ

å¦‚æœ agent éœ€è¦é¢‘ç¹è®¿é—®ç½‘ç»œï¼š

```json5
{
  sandbox: {
    docker: {
      network: "bridge",  // è€Œä¸æ˜¯ "none"
    },
  },
}
```

æ³¨æ„ï¼šè¿™ä¼šé™ä½å®‰å…¨æ€§ï¼Œä»…åœ¨å¯ä¿¡ç¯å¢ƒä¸­ä½¿ç”¨ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Docker éƒ¨ç½²](/install/docker)
- [æ²™ç›’å®‰å…¨è¯¦è§£](/gateway/sandboxing)
- [å¤š Agent æ²™ç›’é…ç½®](/multi-agent-sandbox-tools)
- [Gateway é…ç½®](/configuration)

---

## ğŸ¤ è´¡çŒ®

å¦‚æœä½ å‘ç°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿ï¼š

1. æäº¤ Issue: https://github.com/openclaw/openclaw/issues
2. åˆ›å»º Pull Request: https://github.com/openclaw/openclaw/pulls

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](https://github.com/openclaw/openclaw/blob/main/LICENSE)ã€‚

---

**æ„‰å¿«ä½¿ç”¨ OpenClaw Ultimate Sandbox! à¸…'Ï‰'à¸…**
