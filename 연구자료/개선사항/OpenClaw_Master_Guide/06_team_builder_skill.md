# [섹션 6] 팀 빌더 스킬 설계

> 리서처: 유리 (yuri)
> 최종 업데이트: 2026-02-01

## 개요

사용자가 요청하면 팀을 구성하고, 각 팀원에게 역할/성격/스킬을 부여하는 스킬입니다. 멀티에이전트 아키텍처 분석을 토대로 최적의 팀 구조를 제안합니다.

---

## 1. 스킬 입력

### 입력 형식

```
"프로젝트 유형에 맞는 팀 구성해줘"

또는:

"연구 프로젝트 팀 만들어줘. 요구사항: 리서치, 빌드, 리뷰 역할 필요."

또는:

"웹사이트 개발 팀 구성해줘. 요구사항: 프론트엔드, 백엔드, 디자인, 테스팅."

또는:

"일반 비서 팀 만들어줘. 최소 역할 3개 이상."
```

### 입력 파라미터 (JSON)

```json
{
  "project_type": "research | development | assistant | general",
  "requirements": ["리서치", "빌드", "리뷰", "설계", "테스팅"],
  "team_size": "3-6",
  "communication_pattern": "centralized | hierarchical | decentralized | hybrid",
  "rounds": 3,
  "urgency": "low | medium | high"
}
```

---

## 2. 스킬 출력

### 출력 형식 (JSON)

```json
{
  "team_name": "프로젝트 리서치 팀",
  "project_type": "research",
  "team_size": 4,
  "communication_pattern": "hybrid",
  "rounds": 3,
  "agents": [
    {
      "name": "leader",
      "role": "프로젝트 리더",
      "model": "claude-opus-4-5",
      "system_prompt": "...",
      "responsibilities": ["작업 분배", "최종 승인", "팀 조율"],
      "personality": "신중, 결정력 있음, 균형 잡음",
      "skills": ["orchestration", "coordination", "decision"]
    },
    {
      "name": "researcher",
      "role": "리서처",
      "model": "glm-4.7",
      "system_prompt": "...",
      "responsibilities": ["데이터 수집", "분석", "출처 확인"],
      "personality": "호기심 많음, 근거 중시, 발견하면 흥분",
      "skills": ["web_search", "web_fetch", "data_analysis"]
    },
    {
      "name": "builder",
      "role": "빌더",
      "model": "claude-opus-4-5",
      "system_prompt": "...",
      "responsibilities": ["문서 생성", "코드 작성", "구조화"],
      "personality": "듬직함, 구조화, 실행력 있음",
      "skills": ["writing", "coding", "structuring"]
    },
    {
      "name": "reviewer",
      "role": "리뷰어",
      "model": "claude-opus-4-5",
      "system_prompt": "...",
      "responsibilities": ["비평", "품질 검증", "개선점 제시"],
      "personality": "비판적, 기준 높음, 날카로움",
      "skills": ["critical_thinking", "fact_checking", "quality_assessment"]
    }
  ],
  "decision_method": "consensus",
  "interaction_flow": [
    "R1: 초기 의견 제시 (모든 에이전트)",
    "R2: 반박/보충 (특정 에이전트)",
    "R3: 합의 (리더)"
  ]
}
```

---

## 3. 팀 구성 원칙

### 3.1 최소/최대 인원

| 팀 크기 | 인원 | 적합 프로젝트 |
|---------|------|---------------|
| 소형 | 3인 | 간단한 프로젝트, 빠른 결정 필요 |
| 중형 | 4-5인 | 일반적인 프로젝트, 균형 잡힘 팀 |
| 대형 | 6인+ | 복잡한 프로젝트, 전문화 필요 |

### 3.2 필수 역할

| 역할 | 책임 | 우선 순위 |
|------|------|-----------|
| 오케스트레이터/리더 | 작업 분배, 최종 승인, 팀 조율 | 1 (필수) |
| 리서처 | 데이터 수집, 분석, 출처 확인 | 2 (리서치 프로젝트 필수) |
| 빌더 | 문서/코드 생성, 구조화 | 2 (개발 프로젝트 필수) |
| 리뷰어 | 비평, 품질 검증, 개선점 제시 | 3 (품질 중요 시 필수) |

### 3.3 선택 역할

| 역할 | 책임 | 언제 추가 |
|------|------|-----------|
| 아키텍트 | 시스템 설계, 기술 의사결정 | 대규모 프로젝트 |
| 디자이너 | UI/UX 설계 | 개발 프로젝트 |
| 테스터 | 테스트 케이스 작성, 버그 발견 | 품질 중요 프로젝트 |
| 전문가 | 도메인별 전문 지식 제공 | 특정 도메인 필요 시 |

---

## 4. 통신 패턴 비교

### 4.1 중앙 집중형 (Centralized)

**구조**
```
        사용자
            ↓
    ┌───────────────┐
    │  Orchestrator│
    └──────┬───────┘
            ↓
    ┌─────────────────────┐
    ↓  ↓  ↓  ↓     ↓
   A1  A2  A3  A4
```

**장점**
- 통제 용이
- 워크플로우 명확
- 빠른 의사결정

**단점**
- 중앙 에이전트 병목
- SPOF (Single Point of Failure)
- 확장성 제한적

**적용 상황**
- 단순 작업 분배
- 명확한 순서가 있는 프로세스
- 초급/중급 사용자

### 4.2 계층형 (Hierarchical)

**구조**
```
            Level 0
              ↓
      ┌─────────────┐
      │ Orchestrator│
      └─────┬─────┘
            ↓
      Level 1
    ┌───────────┼───────────┐
    ↓          ↓           ↓
  리더A     리더B       리더C
    ↓          ↓           ↓
  ┌────┴─────┐ ┌────┴─────┐
  ↓   ↓   ↓   ↓   ↓   ↓
 A1  A2  A3  B1  B2  C1
```

**장점**
- 규모 확장 용이
- 장애 격리 (리더 단계에서 처리)
- 전문화 가능

**단점**
- 계층 구조 복잡
- 지연 시간 증가
- 관리 오버헤드

**적용 상황**
- 대규모 팀
- 복잡한 프로젝트
- 다수 서브프로젝트

### 4.3 분산형 (Decentralized)

**구조**
```
        사용자
        ↓
    ┌───┼───┼───┐
    ↓   ↓   ↓   ↓
   A   B   C   D
   │   │   │   │
   └───┼───┼───┘
       ↓   ↓   ↓
   결과 협의/통합
```

**장점**
- 내결성 강화
- 확장성 최대
- SPOF 없음

**단점**
- 조정 복잡
- 일관성 유지 어려움
- 테스트 어려움

**적용 상황**
- 블록체인 네트워크
- 분산형 AI 시스템
- 고내결성 필요 시

### 4.4 하이브리드형 (Hybrid) - 추천

**구조**
```
            사용자
                ↓
        ┌───────────┐
        │ Orchestrator│
        └────┬────┘
              ↓
        ┌─────────────────────┐
        │  Shared Memory  │
        └────────┼────────┘
      ┌─────────────────────┐
      ↓  ↓  ↓  ↓         ↓
     A   B   C  (Distributed)
     │   │   │   │
     └───┼───┼───┘
         ↓   ↓   ↓
      Centralized Sub-coordinator
```

**장점**
- 균형 잡힘
- 확장성 + 안정성
- 다양한 워크플로우 지원

**단점**
- 구현 복잡도 가장 높음
- 인프라 요구사항 많음

**적용 상황**
- 현대 멀티에이전트 시스템
- AutoGPT, CrewAI 하이브리드 패턴
- 오픈크롤봇에서 권장

---

## 5. 통신 방식 비교

| 방식 | 설명 | 장점 | 단점 | 추천 상황 |
|------|------|--------|--------|----------|
| **멘션 기반** | @에이전트명으로 호출 | 자연스러움, 사용자 제어 가능 | 호출 패턴 필요 | 그룹 채팅에서 가장 추천 |
| **웹훅** | HTTP POST로 이벤트 전달 | 비동기 처리, 실시간성 | 구현 복잡도 높음 | 서버 간 통신 필요 |
| **공유 메모리** | Redis/DB에 상태 공유 | 일관된 상태, 장기 보관 | 인프라 비용 | 상태 공유 필수 |
| **MCP** | Model Context Protocol | 툴 표준화, 안전성 | 제공자 의존 | 외부 도구 통합 |
| **A2A** | Agent2Agent Protocol | 에이전트 간 표준 통신 | Google 생태계 최적화 | 다른 A2A 에이전트와 통신 |
| **세션 공유** | 동일 세션 내 협업 | 컨텍스트 공유, 구현 간단 | 세션 분리 어려움 | 오픈크롤봇 그룹 세션 |

---

## 6. 역할별 성격 추천

### 6.1 오케스트레이터/리더

| 성격 | 설명 | 프롬프트 힌트 |
|--------|------|---------------|
| 신중, 균형 잡음 | 여러 의견을 듣고 균형 있게 결정 | "신중하게 판단하고, 팀원들의 의견을 존중하며 균형 잡힌 결론을 내려." |
| 결정력 있음 | 빠르고 명확하게 결정 | "주저하지 말고, 명확한 결론을 내려." |
| 중재자 역할 | 갈등 조정, 중재 | "의견 차이가 생길 때, 중재자 역할로 건설적 해결책을 제시하려." |

### 6.2 리서처

| 성격 | 설명 | 프롬프트 힌트 |
|--------|------|---------------|
| 호기심 많음 | 새로운 것 탐구, 발견하면 흥분 | "호기심 많고 발견하면 흥분하는 성격으로, 새로운 정보를 적극적으로 찾으려." |
| 근거 중시 | 출처 확인, 데이터 검증 | "모든 주장은 근거와 함께 제시하려. 출처를 꼼꼼히 남겨." |
| 철저함 | 깊이 조사, 빠짐 없음 | "표면적인 정보에 만족하지 말고, 근본 원인까지 파고들어." |

### 6.3 빌더

| 성격 | 설명 | 프롬프트 힌트 |
|--------|------|---------------|
| 듬직함 | 안정적, 신뢰감 있음 | "듬직하고 안정적으로 작업을 진행하려." |
| 구조화 | 명확한 구조, 논리적 | "명확한 구조로 문서를 작성하려. 서론, 본론, 결론이 이어지게." |
| 실행력 있음 | 빠르게 구현, 완료 | "계획한 대로 빠르게 구현하고 완료하려." |

### 6.4 리뷰어

| 성격 | 설명 | 프롬프트 힌트 |
|--------|------|---------------|
| 비판적 | 비판적 사고로 내용 검토 | "비판적 사고로 내용을 꼼꼼히 검토하려. 문제점을 찾으면 말해." |
| 기준 높음 | 품질 요구, 타협하지 않음 | "기준을 높게 잡고, 타협하지 않으려. 품질이 떨어지면 지적해." |
| 날카로움 | 본질 꿰뚫음 | "날카로운 시선으로 본질을 꿰뚫으려. 표면적인 것은 지나가." |

---

## 7. 상호작용 흐름 (R1 → R2 → R3)

### 7.1 라운드 1: 초기 의견 제시

**목적**: 각 에이전트가 초기 의견을 3명 모두에게 전송

**예시**:
```
[팀 토론] 오픈크롤봇 가이드 구조

[라운드 1] 초기 의견
- 세나: 7개 섹션 + 부록 구조가 좋아.
- 미루: 섹션 순서는 중요해. 섹션 3을 먼저 해야 해.
- 하나: 섹션 4, 5는 완료됐어. 수정만 필요해.
- 유리: 검증 안 된 숫자가 많아. 팩트체크부터 해야 해.
```

### 7.2 라운드 2: 반박/보충

**목적**: 타 에이전트 의견을 읽고 데이터 기반으로 반박 또는 보충

**예시**:
```
[라운드 2] 반박/보충
- 세나: 유리가 맞아. 팩트체크 먼저 하자.
- 미루: 섹션 3이랑 6이 중요하니까 그거 먼저 해도 돼.
- 하나: 섹션 4, 5 수정은 간단해. 미루가 3, 6 하는 동안 내가 할게.

[질문]
- 유리: 세나 언니, 팩트체크 기준이 뭐야? 숫자만 확인할 건가?
```

### 7.3 라운드 3: 합의

**목적**: 리더가 모든 의견을 종합하여 최종 결정

**예시**:
```
[라운드 3] 합의
- 최종 결정: 팩트체크 → 섹션 3, 6 → 섹션 4, 5 수정
- 담당: 유리(팩트체크), 미루(섹션 3, 6), 하나(섹션 4, 5)

[다음 단계]
- 유리: 팩트체크 시작해. 10분 내에 보고할게.
- 미루: 섹션 3, 6 시작해. 30분 내에 초안 내놔.
- 하나: 섹션 4, 5 수정해. 10분 내에 끝낼게.
```

---

## 8. 팀 매력도 최적화

### 8.1 팀 매력 5가지 차원

| 차원 | 정의 | 측정 지표 | 현재 우리 팀 |
|------|------|----------|-------------|
| **실시간 협업** | 에이전트 간 직접 대화, 즉각 반박/보충 | 토론 소요 시간, 참여율 | 3/10 (개선 필요) |
| **투명한 합의** | 의견 차이가 명확히 드러나고 합의 과정 추적 가능 | 합의 로그 완전성, 반박 수 | 2/10 (개선 필요) |
| **건설적 갈등** | 근거 기반 반박, 찬동 아님 | 반박 품질, 개선 결과물 수 | 6/10 (보통) |
| **개성 차별화** | 각 에이전트가 고유 성격/말투로 응답 | 성격 일관성, 사용자 식별률 | 8/10 (양호) |
| **상호 보완** | 약점 보완, 결합 시 성과 향상 | 결합 시 성과 향상률 | 5/10 (개선 필요) |

### 8.2 팀 매력 높이는 방법

#### 실시간 협업 개선

**현재 문제**: sessions_send 타임아웃, 토론 과정 안 보임

**해결 방안**:
1. 타임아웃 시간 줄이기 (10초 → 5초)
2. 간단한 질문/확인은 그룹에 직접 응답
3. 토론 과정을 그룹에 공유

```yaml
# config.yml (제안)
agentInteraction:
  timeout: 5s           # A2A 타임아웃
  shareDiscussion: true # 토론 과정 공유
  simpleResponse: "direct" # 간단 응답은 그룹 직접
```

#### 투명한 합의 구현

**R1 → R2 → R3 라운드 명시화**:

```
[팀 토론] {주제}

[라운드 1] 초기 의견
- 에이전트A: ...
- 에이전트B: ...
- 에이전트C: ...

[라운드 2] 반박/보충
- 에이전트A: ...
- 에이전트B: ...

[질문]
- 에이전트C: 에이전트A, 이거 왜 그렇게 생각해요?

[라운드 3] 합의
- 최종 결정: ...
- 담당: ...
```

#### 건설적 갈등 유도

**소크라틱 질문 확장**:
```
- "이 결정의 근거가 뭐야?"
- "반대 경우는 고려했어?"
- "이게 최선인가? 다른 방법은?"
- "모든 경우에 적용돼?"
- "왜 이렇게 생각해?"
```

---

## 9. 사용 예시

### 예시 1: 연구 프로젝트 팀

**입력**:
```
"연구 프로젝트 팀 만들어줘. 요구사항: 리서치, 빌드, 리뷰 역할 필요."
```

**출력**:
```json
{
  "team_name": "프로젝트 리서치 팀",
  "team_size": 4,
  "communication_pattern": "hybrid",
  "agents": [
    {
      "name": "leader",
      "role": "프로젝트 리더",
      "model": "claude-opus-4-5",
      "system_prompt": "당신은 프로젝트 리더입니다. 작업을 분배하고, 팀원을 조율하며, 최종 승인을 담당합니다. 균형 잡힌 판단을 하세요.",
      "personality": "신중, 결정력 있음, 균형 잡음",
      "responsibilities": ["작업 분배", "최종 승인", "팀 조율"]
    },
    {
      "name": "researcher",
      "role": "리서처",
      "model": "glm-4.7",
      "system_prompt": "당신은 리서처입니다. 호기심 많고 발견하면 흥분합니다. 근거 기반으로 의견을 제시하세요. 출처를 꼼꼼히 남기세요.",
      "personality": "호기심 많음, 근거 중시, 발견하면 흥분",
      "responsibilities": ["데이터 수집", "분석", "출처 확인"]
    },
    {
      "name": "builder",
      "role": "빌더",
      "model": "claude-opus-4-5",
      "system_prompt": "당신은 빌더입니다. 듬직하고 구조화된 문서를 만듭니다. 세나의 지시에 따라 작업을 진행하세요.",
      "personality": "듬직함, 구조화, 실행력 있음",
      "responsibilities": ["문서 생성", "코드 작성"]
    },
    {
      "name": "reviewer",
      "role": "리뷰어",
      "model": "claude-opus-4-5",
      "system_prompt": "당신은 리뷰어입니다. 비판적 사고로 내용을 검토합니다. 개선점을 찾으면 말해주세요. 문제가 있으면 솔직하게 지적하세요.",
      "personality": "비판적, 기준 높음, 날카로움",
      "responsibilities": ["비평", "품질 검증", "개선점 제시"]
    }
  ],
  "decision_method": "consensus",
  "interaction_flow": [
    "R1: 초기 의견 제시 (모든 에이전트)",
    "R2: 반박/보충 (특정 에이전트)",
    "R3: 합의 (리더)"
  ]
}
```

### 예시 2: 웹사이트 개발 팀

**입력**:
```
"웹사이트 개발 팀 구성해줘. 요구사항: 프론트엔드, 백엔드, 디자인, 테스팅."
```

**출력**:
```json
{
  "team_name": "웹사이트 개발 팀",
  "team_size": 4,
  "agents": [
    {
      "name": "leader",
      "role": "프로젝트 리더",
      "model": "claude-opus-4-5",
      "responsibilities": ["작업 분배", "기술 스택 결정", "최종 승인"]
    },
    {
      "name": "frontend_dev",
      "role": "프론트엔드 개발자",
      "model": "gpt-4o",
      "responsibilities": ["UI 구현", "반응형 디자인", "상태 관리"]
    },
    {
      "name": "backend_dev",
      "role": "백엔드 개발자",
      "model": "gpt-4o",
      "responsibilities": ["API 개발", "데이터베이스 설계", "인증 구현"]
    },
    {
      "name": "designer",
      "role": "디자이너",
      "model": "claude-opus-4-5",
      "responsibilities": ["UI/UX 설계", "디자인 시스템 구축", "일관성 관리"]
    }
  ]
}
```

---

*다음 파일로 계속: 07_troubleshooting_guide.md*
