# 섹션 4: 현재 세팅 진단 프레임워크

## 4.1 자가진단 체크리스트 (20개 항목)

### A. 기본 설정 (5점)
| # | 항목 | ✅/❌ | 점수 |
|---|------|-------|------|
| 1 | Node.js ≥ 22 설치됨 | | /1 |
| 2 | `openclaw doctor` 통과 (에러 0개) | | /1 |
| 3 | API 키 설정 완료 (최소 1개 프로바이더) | | /1 |
| 4 | 채널 연결 확인 (Telegram/WhatsApp/Discord 중 1개+) | | /1 |
| 5 | `openclaw.json` 존재 + 유효 | | /1 |

### B. 보안 (5점)
| # | 항목 | ✅/❌ | 점수 |
|---|------|-------|------|
| 6 | `allowFrom` 설정됨 (화이트리스트) | | /1 |
| 7 | Gateway 토큰 설정됨 | | /1 |
| 8 | 그룹: `requireMention: true` 설정 | | /1 |
| 9 | 샌드박스 모드 활성화 (민감 에이전트) | | /1 |
| 10 | 제3자 스킬 검토 후 설치 | | /1 |

### C. 성능 & 비용 (5점)
| # | 항목 | ✅/❌ | 점수 |
|---|------|-------|------|
| 11 | 작업별 적절한 모델 배정 | | /1 |
| 12 | 불필요한 스킬 비활성화 | | /1 |
| 13 | 히스토리 제한 설정 (group/DM) | | /1 |
| 14 | Rate limit 대응 (failover/다중 프로바이더) | | /1 |
| 15 | 로깅 레벨 적절 (production: info) | | /1 |

### D. 운영 & 확장 (5점)
| # | 항목 | ✅/❌ | 점수 |
|---|------|-------|------|
| 16 | SOUL.md 커스터마이징 완료 | | /1 |
| 17 | MEMORY.md 활용 중 | | /1 |
| 18 | 크론 작업 설정 (리마인더/자동화 1개+) | | /1 |
| 19 | 백업 설정 (설정 파일 + 워크스페이스) | | /1 |
| 20 | 업데이트 관리 (`openclaw update`) | | /1 |

## 4.2 점수 매기기 가이드

| 점수 | 등급 | 상태 | 다음 액션 |
|------|------|------|----------|
| 18-20 | S | 마스터 | 고급 최적화, 커뮤니티 기여 |
| 15-17 | A | 숙련 | 자동화 확장, 멀티에이전트 도입 |
| 12-14 | B | 중급 | 보안 강화, 스킬 확장 |
| 8-11 | C | 초급 | 기본 설정 완성, 보안 설정 |
| 0-7 | D | 입문 | 기본 설치부터 다시 점검 |

## 4.3 성능 벤치마크 기준

### 응답 시간 벤치마크
| 작업 유형 | 목표 | 경고 | 문제 |
|----------|------|------|------|
| 단순 대화 | < 3초 | 3-8초 | > 8초 |
| 웹 검색 + 답변 | < 15초 | 15-30초 | > 30초 |
| 파일 생성/수정 | < 10초 | 10-20초 | > 20초 |
| 멀티에이전트 토론 (1라운드) | < 60초 | 60-120초 | > 120초 |
| 딥리서치 (풀 보고서) | < 10분 | 10-20분 | > 20분 |

### 비용 벤치마크 (월 기준)
| 사용 패턴 | 예상 비용 | 최적화 후 |
|----------|----------|----------|
| 가벼운 사용 (하루 10회) | $5-15 | $2-5 (Flash) |
| 중간 사용 (하루 30회) | $15-50 | $8-20 |
| 헤비 사용 (하루 100회+) | $50-200 | $20-80 |
| 무료 전략 (Gemini/Ollama) | $0 | $0 |

## 4.4 개선점 발견 질문지

### 기능 활용도
1. SOUL.md를 수정해본 적 있나요?
2. 스킬을 설치하거나 만들어본 적 있나요?
3. 크론 작업을 사용하고 있나요?
4. 멀티에이전트를 운영하고 있나요?
5. 노드(iOS/Android)를 페어링해본 적 있나요?

### 보안 현황
6. 봇에 접근할 수 있는 사람이 나만인가요?
7. 스킬 설치 전 코드를 검토하나요?
8. Gateway가 외부에서 접근 가능한가요?
9. 민감한 API 키가 환경변수로 관리되고 있나요?
10. `openclaw doctor` 마지막 실행이 언제인가요?

### 비용 최적화
11. 작업별로 다른 모델을 사용하고 있나요?
12. 불필요한 스킬이 활성화되어 있나요?
13. 무료 모델(Gemini/Ollama)을 고려했나요?
14. OAuth 구독 인증을 사용하고 있나요?
15. 히스토리 제한을 설정했나요?

## 4.5 일반적인 실수 & 해결책

### 실수 1: allowFrom 미설정
**증상**: 아무나 봇에 메시지를 보낼 수 있음
**위험**: 무단 접근, API 비용 폭탄
**해결**:
```json5
{ channels: { telegram: { allowFrom: ["내_USER_ID"] } } }
```

### 실수 2: Gateway 외부 노출
**증상**: 인터넷에서 Gateway 포트 접근 가능
**위험**: 완전한 시스템 제어권 탈취
**해결**: 방화벽 설정, Gateway 토큰 필수, Tailscale/VPN 사용

### 실수 3: 모든 스킬 활성화
**증상**: 시스템 프롬프트 비대, 느린 응답, 높은 비용
**위험**: 토큰 낭비, 불필요한 도구 접근
**해결**: `skills.entries.{name}.enabled: false`로 불필요 스킬 비활성화

### 실수 4: 단일 모델만 사용
**증상**: Opus로 모든 작업 처리 → 높은 비용
**위험**: 비용 비효율
**해결**: 채널/작업별 모델 분리 (bindings 활용)

### 실수 5: 백업 없음
**증상**: 설정/워크스페이스 유실 위험
**위험**: 데이터 손실
**해결**: 크론으로 자동 백업 설정 (freesearch 백업 스킬 참고)

### 실수 6: 그룹에서 모든 메시지 응답
**증상**: 그룹 내 모든 메시지에 봇이 반응
**위험**: 스팸, 비용 폭탄
**해결**: `requireMention: true` + `mentionPatterns` 설정

### 실수 7: 에이전트 간 auth 공유
**증상**: 에이전트 간 인증 충돌
**위험**: 세션 혼선, 인증 실패
**해결**: 에이전트별 별도 `auth-profiles.json` (복사는 OK, agentDir 공유는 NG)

### 실수 8: 업데이트 방치
**증상**: 구버전으로 인한 버그, 보안 취약점
**위험**: 알려진 취약점 노출
**해결**: 정기적 `npm update -g openclaw` 또는 `openclaw update`

## 4.6 우선순위별 개선 로드맵 템플릿

### 즉시 (Day 1)
- [ ] `openclaw doctor` 실행 → 모든 에러 해결
- [ ] `allowFrom` 설정 확인
- [ ] Gateway 토큰 설정

### 1주차
- [ ] SOUL.md 커스터마이징
- [ ] 필수 스킬 설치 (weather, summarize 등)
- [ ] 불필요 스킬 비활성화
- [ ] 히스토리 제한 설정

### 2주차
- [ ] 크론 작업 1개 이상 설정
- [ ] 백업 자동화
- [ ] 비용 모니터링 시작
- [ ] MEMORY.md 활용 시작

### 1개월
- [ ] 멀티에이전트 도입 검토
- [ ] 채널별 모델 분리
- [ ] 커스텀 스킬 1개 제작
- [ ] 노드 페어링 (모바일)

### 3개월
- [ ] 전체 워크플로우 자동화
- [ ] 팀 운영 구조 최적화
- [ ] 성능 벤치마크 정기 측정
- [ ] 커뮤니티 기여 (스킬 공유)

---

## 출처
- [OpenClaw 공식 문서 - Configuration](https://docs.openclaw.ai/gateway/configuration)
- [OpenClaw 공식 문서 - Security](https://docs.openclaw.ai/gateway/security)
- [OpenClaw 공식 문서 - Troubleshooting](https://docs.openclaw.ai/gateway/troubleshooting)
- [Reddit: 보안 베스트 프랙티스](https://www.reddit.com/r/openclaw/)
- [Reddit: 안전한 로컬 실행법](https://www.reddit.com/r/LocalLLM/comments/1qri661/)
- [GeekNews: 보안 위험 분석](https://news.hada.io/topic?id=26273)
