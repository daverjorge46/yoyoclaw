# 2026-01-19

## Clawdbot Configuration Fixes

### System Cron Jobs
Fixed notification delivery for all 6 system cron jobs. The issue was that `clawdbot agent --deliver` requires `--reply-account steve` when there are multiple Telegram accounts configured.

Fixed wrapper scripts:
- `sync-skills.sh` - every 4 hours
- `steve-email-check.sh` - hourly
- `daily-weather-steve.sh` - 6:00 AM daily
- `daily-verse.sh` - 6:05 AM daily
- `daily-recap-posterboard.sh` - 5:00 PM daily
- `archive-media.sh` - every 2 hours

All wrappers now use the correct format:
```bash
clawdbot agent --agent main --message "..." --deliver --reply-channel telegram --reply-account steve --reply-to 1191367022
```

### Exec Permissions
Fixed exec permissions for Steve agent by updating both:
1. `~/.clawdbot/clawdbot.json` - added `tools.exec` config
2. `~/.clawdbot/exec-approvals.json` - set `defaults.security: "full"` and `ask: "off"`

### Emma Skill Enhancement
Enhanced document type detection in emma.py to categorize:
- Official statements
- Audited financials (with 3-year filtering)
- Quarterly financials
- Monthly financials
- Occupancy reports
- Covenant compliance docs

Also added year extraction for smart filtering.

### Key Learnings
- `clawdbot message send` has a bug with channel lookup - use `clawdbot agent --deliver` as workaround
- Multiple Telegram accounts require `--reply-account` parameter
- Exec permissions are stored in separate `exec-approvals.json` file, not just main config
